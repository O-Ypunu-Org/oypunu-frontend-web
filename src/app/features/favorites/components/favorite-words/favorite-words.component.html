<div class="min-h-screen bg-gray-950 text-white">

  <!-- ─── Zone de contenu ─── -->
  <div class="w-full max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6 pb-10">

    <!-- Filtres et tri (seulement si des favoris existent) -->
    <div *ngIf="!isLoading && favoriteWords.length > 0" class="mb-5">
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">

        <!-- Tri -->
        <app-custom-dropdown
          [(ngModel)]="currentSort"
          (selectionChange)="sortFavorites($event[0])"
          [options]="sortOptions"
          [placeholder]="'Trier par…'"
          [multiple]="false">
        </app-custom-dropdown>

        <!-- Langue -->
        <app-custom-dropdown
          [(ngModel)]="languageFilter"
          [options]="getLanguageOptions()"
          [placeholder]="'Toutes les langues'"
          [multiple]="false">
        </app-custom-dropdown>

        <!-- Partie du discours -->
        <app-custom-dropdown
          [(ngModel)]="partOfSpeechFilter"
          [options]="getPartOfSpeechOptions()"
          [placeholder]="'Tous les types'"
          [multiple]="false">
        </app-custom-dropdown>

      </div>

      <!-- Réinitialiser (visible seulement si filtres actifs) -->
      <div *ngIf="languageFilter || partOfSpeechFilter" class="mt-2 flex justify-end">
        <button type="button" (click)="resetFilters()"
          class="text-xs text-purple-400 hover:text-purple-300 transition-colors">
          Réinitialiser les filtres
        </button>
      </div>
    </div>

    <!-- Chargement -->
    <div *ngIf="isLoading" class="flex flex-col items-center justify-center py-24 gap-3">
      <div class="w-10 h-10 border-2 border-gray-700 border-t-purple-600 rounded-full animate-spin"></div>
      <p class="text-sm text-gray-400">Chargement de vos favoris…</p>
    </div>

    <!-- Erreur -->
    <div *ngIf="errorMessage && !isLoading"
      class="flex flex-col items-center justify-center py-24 gap-4 text-center">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-red-400" fill="none" viewBox="0 0 24 24"
        stroke="currentColor" stroke-width="1.5">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <p class="text-sm text-red-400">{{ errorMessage }}</p>
      <button type="button" (click)="loadFavoriteWords()"
        class="text-sm text-purple-400 hover:text-purple-300 transition-colors">
        Réessayer
      </button>
    </div>

    <!-- Contenu -->
    <div *ngIf="!isLoading && !errorMessage">

      <!-- Grille : 1 col mobile, 2 col desktop, 3 col wide -->
      <div *ngIf="filterFavorites().length > 0"
        class="grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-4">
        <app-word-card
          *ngFor="let word of filterFavorites()"
          [word]="word">
        </app-word-card>
      </div>

      <!-- Aucun résultat après filtrage -->
      <div *ngIf="favoriteWords.length > 0 && filterFavorites().length === 0"
        class="flex flex-col items-center justify-center py-16 gap-4 text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-gray-600" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="1.5">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <p class="text-sm text-gray-400">Aucun mot ne correspond à vos filtres.</p>
        <button type="button" (click)="resetFilters()"
          class="text-sm text-purple-400 hover:text-purple-300 transition-colors">
          Réinitialiser les filtres
        </button>
      </div>

      <!-- État vide -->
      <div *ngIf="favoriteWords.length === 0"
        class="flex flex-col items-center justify-center py-24 gap-4 text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-gray-700" fill="none" viewBox="0 0 24 24"
          stroke="currentColor" stroke-width="1.5">
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
        </svg>
        <div>
          <p class="text-base font-semibold text-gray-300 mb-1">Aucun favori pour l'instant</p>
          <p class="text-sm text-gray-500">Ajoutez des mots à vos favoris depuis le dictionnaire</p>
        </div>
        <a routerLink="/dictionary"
          class="mt-2 px-5 py-2.5 rounded-xl bg-purple-600 hover:bg-purple-700 text-sm text-white font-medium transition-colors">
          Découvrir des mots
        </a>
      </div>

    </div>
  </div>

</div>
